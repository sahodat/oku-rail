<!DOCTYPE html>
<html>
  <head>
    <title>oku-rail_delay</title>

    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <%= Gon::Base.render_data %>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <!-- å‰ã®ãƒšãƒ¼ã‚¸ã§é¸æŠã—ãŸé§…å—ã‘å–ã‚Š -->
    <SCRIPT language="JavaScript">

            var query = location.search;
            var tmp = query.split('=');
            var showselectstation = tmp[1]
            // console.log(showselectstation);
            // console.log(gon.job);
            var jj_delaycount = gon.job;//tmp1
            var jj_count = gon.job2;//tmp2
            var jj_hugedelay_count = gon.job3;//tmp3

            var i = 0;
            var j = 0;
            var j_delaycount = 0.0;
            var j_count = 0.0;
            var j_hugedelay_delaycount = 0.0;

//åˆ¤å®šéƒ¨åˆ†ä½œæˆ
            DD = new Date();  //ç¾åœ¨æ™‚åˆ»ã®å–å¾—
         // Year = DD.getYear();
         // Month = DD.getMonth() + 1;
         // Day = DD.getDate();
            Hours = DD.getHours();
            // Minutes = DD.getMinutes();
            // Seconds = DD.getSeconds();
            var hour = Number(Hours) ;
            var classifier = hour + ', "' + showselectstation;//showselectstationã«ã—ãŸã„
            reg1 = new RegExp(classifier);
            //åˆ†å­ã®å–å¾—

            for(key in jj_delaycount){
                i = i + 1;
                var tmpi = key;
                if (tmpi.match(reg1)){    //æ™‚é–“ã¨é§…å
                     // console.log(tmp1[key]);
                     j_delaycount = jj_delaycount[key];
                     //åˆ†æ¯ã®å–å¾—
                     for (key in jj_count){
                        j = j + 1;
                        tmpj = key;
                        if (tmpj.match(reg1)){    //æ™‚é–“ã¨é§…å
                      // console.log(tmp2[key]);
                        j_count = jj_count[key];
                        }
                     }
                }
            }
            //ç¢ºç‡ã®è¨ˆç®—è¨ˆç®—
            parseFloat(j_delaycount);
            parseFloat(j_count);
            var jresult = (j_delaycount / j_count)*100;
            if (j_count == 0){
                console.log("é¸ã‚“ã é§…ã¯å¸¸ç£ç·šã§ã¯ãªã„ãŸã‚è¡¨ç¤ºã§ãã¾ã›ã‚“")
            }
            else{
                console.log(hour,"æ™‚ã®",showselectstation,"ã®å°è¦æ¨¡é…å»¶ã®å¯èƒ½æ€§ã¯",jresult,"%");
            }

            for(key in jj_hugedelay_count){
                i = i + 1;
                tmpi = key;
                if (tmpi.match(reg1)){    //æ™‚é–“ã¨é§…å
                     // console.log(tmp1[key]);
                     j_hugedelay_delaycount = jj_hugedelay_count[key];
                }
            }
            //ç¢ºç‡ã®è¨ˆç®—è¨ˆç®—
            parseFloat(j_hugedelay_delaycount);
            parseFloat(j_count);
            // console.log(j_count);
            var jresulth = (j_hugedelay_delaycount / j_count)*100;
            if (j_count == 0){
                console.log("é¸ã‚“ã é§…ã¯å¸¸ç£ç·šã§ã¯ãªã„ãŸã‚è¡¨ç¤ºã§ãã¾ã›ã‚“")
            }
            else{
            console.log(hour,"æ™‚ã®",showselectstation,"ã®å¤§è¦æ¨¡é…å»¶ã®å¯èƒ½æ€§ã¯",jresulth,"%");
            }




//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š//ã“ã“ã‹ã‚‰å±±æ‰‹ç·š

            var yy_delaycount = gon.yam;//tmp1
            var yy_count = gon.yam2;//tmp2
            var yy_hugedelay_count = gon.yam3;//tmp3

            var i = 0;
            var j = 0;
            var y_delaycount = 0.0;
            var y_count = 0.0;
            var y_huge_delaycount = 0.0;

            var hour = Number(Hours) ;
            var abc = hour + ', "' + showselectstation;
            reg1 = new RegExp(abc);//åˆ¤å®šéƒ¨åˆ†
            //åˆ†å­ã®å–å¾—
            for(key in yy_delaycount){
                i = i + 1;
                tmpi = key;
                if (tmpi.match(reg1)){    //æ™‚é–“ã¨é§…å
                     // console.log(tmp1[key]);
                     j_delaycount = yy_delaycount[key];
                     //åˆ†æ¯ã®å–å¾—
                     for (key in yy_count){
                        j = j + 1;
                        tmpj = key;
                        if (tmpj.match(reg1)){    //æ™‚é–“ã¨é§…å
                        // console.log(tmp2[key]);
                        y_count = yy_count[key];
                        }
                     }
                }
            }
            //ç¢ºç‡ã®è¨ˆç®—è¨ˆç®—
            parseFloat(y_delaycount);
            parseFloat(y_count);
            var yresult = (y_delaycount / y_count)*100;
            if (y_count == 0){
                console.log("ã‚¨ãƒ©ãƒ¼ï¼šé¸ã‚“ã é§…ã¯å±±æ‰‹ç·šã§ã¯ãªã„ãŸã‚è¡¨ç¤ºã§ãã¾ã›ã‚“")
            }
            else{
            console.log(hour,"æ™‚ã®",showselectstation,"ã®å°è¦æ¨¡é…å»¶ã®å¯èƒ½æ€§ã¯",yresult,"%");
            }

            var y_delaycount = 0.0;
            var y_huge_delaycount = 0.0;


            for(key in yy_hugedelay_count){
                i = i + 1;
                tmpi = key;
                if (tmpi.match(reg1)){    //æ™‚é–“ã¨é§…å
                     // console.log(tmp1[key]);
                     y_huge_delaycount = yy_hugedelay_count[key];
                     //åˆ†æ¯ã®å–å¾—
                     // for (key in tmp3){
                     //    j = j + 1;
                     //    tmpj = key;
                     //    if (tmpj.match(reg1)){    //æ™‚é–“ã¨é§…å
                     // // console.log(tmp2[key]);
                     // y_count = tmp3[key];
                     //    }
                     // }
                }
            }
            //ç¢ºç‡ã®è¨ˆç®—è¨ˆç®—
            parseFloat(y_huge_delaycount);
            parseFloat(y_count);
            var yresulth = (y_huge_delaycount / y_count)*100;
            if (y_count == 0){
                console.log("ã‚¨ãƒ©ãƒ¼ï¼šé¸ã‚“ã é§…ã¯å±±æ‰‹ç·šã§ã¯ãªã„ãŸã‚è¡¨ç¤ºã§ãã¾ã›ã‚“")
            }
            else{
            console.log(hour,"æ™‚ã®",showselectstation,"ã®å¤§è¦æ¨¡é…å»¶ã®å¯èƒ½æ€§ã¯",yresulth,"%");
            }




    </SCRIPT>

<<<<<<< HEAD
    <a href="#" class="backbutton">ï¼œ<!--  æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
=======

    <a href="#" class="backbutton">ğŸšƒ <!--  æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
>>>>>>> master
      <SCRIPT language="JavaScript">
        $('.backbutton').on('click', function() {
                location.href = '/';
        });
      </SCRIPT>
    </a>

    <div class="contents">
    <h1>Delay Prediction</h1>
    <h2>long time</h2>
    <h4>
        <SCRIPT language="JavaScript">
            tmpresult = yresulth.toFixed(1);
            document.write(tmpresult,"%");
        </SCRIPT>
    </h4>

    <h3>Short time</h3>
    <h5>
        <SCRIPT language="JavaScript">
            tmpresult = yresult.toFixed(1);
            document.write(tmpresult,"%");
        </SCRIPT>
    </h5>
    <p class="fan"></p>

     <div class="station">
    <liosaki>
     Oosaki
    </liosaki>
    <li1>
     Gotanda
    </li1>
    <li2>
     Meguro
    </li2>
    <li3>
     Ebisu
    </li3>
    <li4>
     Shibuya
    </li4>
    <li5>
     Harajyuku
    </li5>
    <li6>
     Yoyogi
    </li6>
        </div>
    </div>


  </body>
</html>
